(function(n){n(function(){console.log("购物车")})})(jQuery);$(function(){$(window).scroll(function(){if($(window).scrollTop()>40){$(".headNav").slideDown("fast");$(".rightBar").css({top:"40px"})}else{$(".headNav").slideUp("fast");$(".rightBar").css({top:"142px"})}});$(".topBtn").on("click",function(){$("body,html").animate({scrollTop:0},300)});var n=true;$(".rightBar .menuBtn").on("click",function(){if(n){$(".rightBar").animate({right:"-100px"},300);$(".menuBtn").html("&lt;");$(".contact").show();n=false}else{$(".rightBar").animate({right:0},300);$(".menuBtn").html("&gt;");$(".contact").hide();n=true}});$.post("../php/leftNav.php",function(n){var a=JSON.parse(n);a.forEach(function(n,a,o){var t=$("<li/>");var e=$("<a/>").html(n.title).appendTo(t);if(n.indexId==1){t.appendTo($(".nav1"));if(n.iconSrc){var i=$("<img/>").attr("src","../"+n.iconSrc).appendTo(e)}}if(n.indexId>=2&&n.indexId<=5){t.appendTo($(".nav2"));t.clone().appendTo($(".tNav"));if(n.iconSrc){var i=$("<img/>").attr("src","../"+n.iconSrc).appendTo(e)}}if(n.indexId>=6&&n.indexId<=16){t.appendTo($(".nav3"));t.clone().appendTo($(".tNav"));if(n.iconSrc){var i=$("<img/>").attr("src","../"+n.iconSrc).appendTo(e)}}if(n.indexId>16){t.appendTo($(".nav4"))}})});var a=window.location.href.split("=")[1];if(a&&a.length!=0){var o="indexId="+a;$.post("../php/goodsDetails.php",o,function(n){var a=JSON.parse(n)[0];console.log(a);$(".goodsContain .leftImg").attr({src:"../"+a.image});$(".goodsContain .information .english").html(a.english);$(".goodsContain .information .korean").html(a.korean);$(".goodsContain .information .chinese").html(a.chinese);zgeUrl="../"+a.icon;var o="url(../"+a.icon+") no-repeat 0 0";$(".goodsContain .information .icon").css({background:o});$(".goodsContain .aboutPrice .price").html(a.price)})}$(".reduce").on("click",function(){var n=parseInt($(".inputNum").val());if(n==1){return}else{$(".inputNum").val(n-1)}});$(".plus").on("click",function(){var n=parseInt($(".inputNum").val());$(".inputNum").val(n+1)});$(".register").on("click",function(){window.location.href="register.html"});$(".login").on("click",function(){window.location.href="login.html"});$.post("../php/index.php",function(n){var o=JSON.parse(n);if(o.state=="true"){$(".login").html(o.username).unbind();$(".register").html("退出").unbind().on("click",function(){$.post("../php/logout.php",function(n){var a=JSON.parse(n);if(a.state){window.location.href="goodsDetails.html"}})});console.log(o.username);$(".cart").on("click",function(){var n=a;var t=$(".goodsContain .leftImg").attr("src");var e=zgeUrl;var i=$(".goodsContain .english").html();var r=$(".goodsContain .aboutColor .chooseColor").val();var p=$(".goodsContain .aboutColor .chooseSize").val();var s=$(".goodsContain .aboutColor .inputNum").val();var l=$(".goodsContain .aboutPrice .price").html();$.post("../php/cart.php",{user:o.username,goodsId:n,img:t,icon:e,english:i,color:r,size:p,price:l,amount:s},function(n){console.log(n);var a=JSON.parse(n);if(a.state=="true"){$.alert({content:a.message+" , 自动前往购物车！",onClose:function(){window.location.href="shoppingCart.html"}})}else{$.alert(a.message)}})});$(".userInfo").html("我的账户").unbind();console.log("已登录")}else{console.log("未登录");$(".cart").on("click",function(){alert("未登录，无法添加到购物车！")})}})});$(function(){$(window).scroll(function(){if($(window).scrollTop()>40){$(".headNav").slideDown("fast");$(".rightBar").css({top:"40px"})}else{$(".headNav").slideUp("fast");$(".rightBar").css({top:"142px"})}});$(".topBtn").on("click",function(){$("body,html").animate({scrollTop:0},300)});var n=true;$(".rightBar .menuBtn").on("click",function(){if(n){$(".rightBar").animate({right:"-100px"},300);$(".menuBtn").html("&lt;");$(".contact").show();n=false}else{$(".rightBar").animate({right:0},300);$(".menuBtn").html("&gt;");$(".contact").hide();n=true}});$.post("php/leftNav.php",function(n){var a=JSON.parse(n);a.forEach(function(n,a,o){var t=$("<li/>");var e=$("<a/>").html(n.title).appendTo(t);if(n.indexId==1){t.appendTo($(".nav1"));if(n.iconSrc){var i=$("<img/>").attr("src",n.iconSrc).appendTo(e)}}if(n.indexId>=2&&n.indexId<=5){t.appendTo($(".nav2"));t.clone().appendTo($(".tNav"));if(n.iconSrc){var i=$("<img/>").attr("src",n.iconSrc).appendTo(e)}}if(n.indexId>=6&&n.indexId<=16){t.appendTo($(".nav3"));t.clone().appendTo($(".tNav"));if(n.iconSrc){var i=$("<img/>").attr("src",n.iconSrc).appendTo(e)}}if(n.indexId>16){t.appendTo($(".nav4"))}})});$.post("php/centerBanner.php",function(n){var a=JSON.parse(n);a.forEach(function(n,a,o){var t="."+"g"+n.indexId;var e=$("<span/>").html(n.korean).appendTo($(t));var e=$("<span/>").html(n.chinese).appendTo($(t));var e=$("<span/>").html(n.english).appendTo($(t));var e=$("<span/>").html(n.price).appendTo($(t))})});$.post("php/goodsInfo.php",function(n){var a=JSON.parse(n);a.forEach(function(n,a,o){if(a<=11){var t=$("<li/>").appendTo($(".goodsInfo1")).on("click",function(){window.location.href="html/goodsDetails.html?indexId="+n.indexId});var e=$("<a/>").appendTo(t);var i=$("<img/>").attr("src",n.image).appendTo(e);var r=$("<p/>").appendTo(t);var p="url("+n.icon+") no-repeat 0 0";var s=$("<span/>").css({background:p,display:"inline-block",width:"35px",height:"22px"}).appendTo(r);var r=$("<p/>").html(n.korean).appendTo(t);var r=$("<p/>").html(n.chinese).appendTo(t);var r=$("<p/>").html(n.english).appendTo(t);var r=$("<p/>").html(n.price).appendTo(t)}if(a>11){var t=$("<li/>").appendTo($(".goodsInfo2")).on("click",function(){window.location.href="html/goodsDetails.html?indexId="+n.indexId});var e=$("<a/>").appendTo(t);var i=$("<img/>").attr("src",n.image).appendTo(e);var r=$("<p/>").appendTo(t);var p="url("+n.icon+") no-repeat 0 0";var s=$("<span/>").css({background:p,display:"inline-block",width:"35px",height:"22px"}).appendTo(r);var r=$("<p/>").html(n.korean).appendTo(t);var r=$("<p/>").html(n.chinese).appendTo(t);var r=$("<p/>").html(n.english).appendTo(t);var r=$("<p/>").html(n.price).appendTo(t)}})});$(".register").on("click",function(){window.location.href="html/register.html"});$(".login").on("click",function(){window.location.href="html/login.html"});$.post("php/index.php",function(n){var a=JSON.parse(n);if(a.state=="true"){$(".login").html(a.username).unbind();$(".register").html("退出").unbind().on("click",function(){$.post("php/logout.php",function(n){var a=JSON.parse(n);if(a.state){window.location.href="index.html"}})});$(".userInfo").html("我的账户").unbind();console.log("已登录")}else{console.log("未登录")}});$(".cart").on("click",function(){window.location.href="html/shoppingCart.html"})});$(function(){$("#submit").on("click",function(){$.post("../php/login.php",{username:$("#user").val(),password:$("#pass").val()},function(n){var a=JSON.parse(n);if(a.state=="true"){$.alert({content:a.message,onClose:function(){window.location.href="../index.html"}})}else{$.alert(a.message)}})})});$(function(){$("#submit").on("click",function(){$.post("../php/register.php",{username:$("#user").val(),password:$("#pass").val(),telphone:$("#phone").val()},function(n){var a=JSON.parse(n);if(a.state=="true"){$.alert({content:"恭喜您，注册成功! 自动跳转到登录页面...",onClose:function(){window.location.href="login.html"}})}else{$.alert(a.message)}})})});$(function(){$(window).scroll(function(){if($(window).scrollTop()>40){$(".headNav").slideDown("fast");$(".rightBar").css({top:"40px"})}else{$(".headNav").slideUp("fast");$(".rightBar").css({top:"142px"})}});$(".topBtn").on("click",function(){$("body,html").animate({scrollTop:0},300)});var n=true;$(".rightBar .menuBtn").on("click",function(){if(n){$(".rightBar").animate({right:"-100px"},300);$(".menuBtn").html("&lt;");$(".contact").show();n=false}else{$(".rightBar").animate({right:0},300);$(".menuBtn").html("&gt;");$(".contact").hide();n=true}});$.post("../php/leftNav.php",function(n){var a=JSON.parse(n);a.forEach(function(n,a,o){var t=$("<li/>");var e=$("<a/>").html(n.title).appendTo(t);if(n.indexId==1){t.appendTo($(".nav1"));if(n.iconSrc){var i=$("<img/>").attr("src","../"+n.iconSrc).appendTo(e)}}if(n.indexId>=2&&n.indexId<=5){t.appendTo($(".nav2"));t.clone().appendTo($(".tNav"));if(n.iconSrc){var i=$("<img/>").attr("src","../"+n.iconSrc).appendTo(e)}}if(n.indexId>=6&&n.indexId<=16){t.appendTo($(".nav3"));t.clone().appendTo($(".tNav"));if(n.iconSrc){var i=$("<img/>").attr("src","../"+n.iconSrc).appendTo(e)}}if(n.indexId>16){t.appendTo($(".nav4"))}})});$(".register").on("click",function(){window.location.href="register.html"});$(".login").on("click",function(){window.location.href="login.html"});$.post("../php/index.php",function(n){var a=JSON.parse(n);if(a.state=="true"){$(".login").html(a.username).unbind();$(".register").html("退出").unbind().on("click",function(){$.post("../php/logout.php",function(n){var a=JSON.parse(n);if(a.state){window.location.href="../html/shoppingCart.html"}})});$(".userInfo").html("我的账户").unbind();console.log("已登录");$.post("../php/shoppingCart.php",{user:a.username},function(n){$(".cartList").html("");var a=JSON.parse(n);if(a.state=="false"){alert(a.message)}else{a.data.forEach(function(n,a,o){console.log(n);var t=$("<div/>").addClass("cartItem").appendTo($(".cartList"));var e=$("<div/>").addClass("goodsDetail").appendTo(t);var i=$("<input/>").addClass("check").appendTo(e).attr({type:"checkBox",checked:"checked"});var r=$("<img/>").appendTo(e).attr({src:n.img});var p=$("<div/>").addClass("detailBox").appendTo(e);var s=$("<div/>").addClass("icon").appendTo(p).css({"background-image":"url("+n.icon+")"});var l=$("<p/>").addClass("english").appendTo(p).html(n.english);var c=$("<span/>").addClass("color").appendTo(p).html(n.color);var d=$("<span/>").appendTo(p).html(" / ");var h=$("<span/>").addClass("size").appendTo(p).html(n.size);var v=$("<div/>").addClass("yourChoose").appendTo(p);var u=$("<a/>").addClass("edit").appendTo(v);var f=$("<a/>").addClass("fav").appendTo(v);var m=$("<a/>").addClass("del").appendTo(v).attr({data_user:n.user,data_goodsid:n.goodsid});var g=$("<div/>").addClass("goodsPrice").appendTo(t).html(n.price);var T=$("<div/>").addClass("goodsNum").appendTo(t);var w=$("<div/>").addClass("numBox").appendTo(T);var x=$("<a/>").addClass("reduce").appendTo(w);var I=$("<input/>").addClass("inputNum").appendTo(w).val(n.amount);var C=$("<a/>").addClass("plus").appendTo(w);var k=parseInt(n.amount)*parseInt(n.price.split("¥")[1]);var N=$("<div/>").addClass("goodsSum").appendTo(t).html("¥"+k);var S=$("<div/>").addClass("goodsState").appendTo(t).html("无");$(".reduce").unbind().on("click",function(n){var a=$(n.target);var o=parseInt(a.next().val());if(o==1){a.next().val(1)}else{a.next().val(o-1)}var t=parseInt(a.next().val());var e=parseInt(a.parent().parent().prev().html().split("¥")[1]);var i=t*e;a.parent().parent().next().html("¥"+i)});$(".plus").unbind().on("click",function(n){var a=$(n.target);var o=parseInt(a.prev().val());a.prev().val(o+1);var t=parseInt(a.prev().val());var e=parseInt(a.parent().parent().prev().html().split("¥")[1]);var i=t*e;a.parent().parent().next().html("¥"+i)});$(".inputNum").unbind().on("blur",function(n){var a=$(n.target);var o=parseInt(a.val());var t=parseInt(a.parent().parent().prev().html().split("¥")[1]);var e=o*t;a.parent().parent().next().html("¥"+e)});$(".del").unbind().on("click",function(n){var a=$(n.target);a.parents(".cartItem").remove();var o=a.attr("data_user");var t=a.attr("data_goodsid");var e=a.parent(".yourChoose").prev().prev().prev().html();var i=a.parent(".yourChoose").prev().html();$.post("../php/delGoods.php",{user:o,goodsid:t,color:e,size:i},function(n){var a=JSON.parse(n);if(a.state=="true"){console.log(a.message)}else{console.log(a.message)}})})})}})}else{console.log("未登录");$(".cartList").html("空空如也！！！")}})});